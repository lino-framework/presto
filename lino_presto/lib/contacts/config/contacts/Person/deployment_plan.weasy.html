{% extends "weasyprint/base.weasy.html" %}

{%- block header %}
<h1>{{_("Deployment plan")}} {{fds(ar.action_param_values.start_date)}}...{{fds(ar.action_param_values.end_date)}}
<br>{{obj}}
</h1>
{%- endblock %}


{%- block main %}
{{ super() }}
{% set apv =  ar.action_param_values %}
{% set events = obj.cal_entries_by_guest().order_by('start_date', 'start_time') %}
{% set events = rt.models.system.PeriodEvents.started.add_filter(events, apv)%}

<div class="footer_div">{{obj}} ({{fds(apv.start_date)}}...{{fds(apv.end_date)}})</div>

<table border="1" width="100%">
<thead>
<tr>
<td>{{_("Date")}}</td>
<td>{{_("Time")}}</td>
<td>{{_("Address")}}</td>
<td>{{_("Client")}}</td>
<td>{{_("Duration")}}</td>
<td>{{_("Signature")}}</td>
{% if ar.action_param_values.show_remarks %}
<td>{{_("Remark")}}</td>
{% endif %}
</tr>
</thead>

<tbody>
{% for e in events %}
<tr class="avoid">
<td>{{fds(e.start_date)}}</td>
<td>{{str(e.start_time)[:5]}}</td>
<td>{{e.owner.project.address_location(", ")}}</td>
<td>{{e.owner.project}}</td>
<td>{{str(e.get_duration)}}</td>
<td>{{"\xa0"*20}}</td>
{% if ar.action_param_values.show_remarks %}
<td>{{e.subject}}</td>
{% endif %}
</tr>
{% endfor %}

</tbody>

</table>
{%- endblock %}
